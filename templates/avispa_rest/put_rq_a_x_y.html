{% extends 'avispa_rest/tabs.html' %}

{% block title %} Avispa {% endblock %}
{% block findme %} put_rq_a_x_y {% endblock %}

{% block headscripts %}


  {% for field in data.fieldsschema %}
    {% set widgetstyle = 'avispa_rest/w_input_'+field.FieldWidget+'_style.html' %}   
    {% include widgetstyle ignore missing  %}                                
  {% endfor %}

{% endblock %}

{% block footscripts %}
  {% include 'avispa_rest/wa_jqueryui_lib.html'  %}
  
{% endblock %}

{% block footfunctions %}

{% endblock %}

{% block footafterfunctions %}

{% endblock %}




{% block crumbs %}





<div class="rn-hp5 pull-left"><span class="label label-m">AVISPA</span></div> 
<a href="/{{ data.handle }}" class="rn-b1" >{{ data.handle }}</a>/<a href="/{{ data.handle }}/_collections" class="rn-b1" >_collections</a> 

{% endblock %}

{% block tabtitle %}<i class="fa fa-wrench "></i> Settings 
{% endblock %}

{% block tabcontent %}


<!-- START NEW CONTENT --> 

<div class="row">
    <div class="col-sm-8 omega">
        <div class="alert  alert-warning alert-top" style="height:60px;">
            <span class="fs-1-5"><i class="fa fa-wrench fa-2x"></i> Updating Setting for Data Collection: <strong> {{data.collectionlist.collectionname|upper}}</strong></span>
            
        </div>

    </div>
    <div class="col-sm-4 text-right alpha">
        <div class="alert  bg-gray alert-top" style="height:60px;">
            <span class="fs-1-2"> cancel without saving: 
                <button type="button" class="btn btn-vader btn-sm" data-toggle="modal" data-target="#forkModal">
                    <i class="fa fa-times fa-2x fc-a"></i>
                </button>
            </span>
        </div>

    </div>
</div>


<div class="row">

    <div class="col-sm-7">
        <div class="spa10"></div>

        <form class="form-horizontal" role="form" action="/{{ data.handle }}/_collections/{{ data.collection }}?method=PUT" method="POST">


            
            {{ ui.rntitle('Collection Info','') }}

            <div class="box box-clear p-50">


                Collection name: <input name="CollectionNameDisabled" class="form-control" type="text" value="{{data.collectionlist.collectionname}}" disabled><input name="CollectionName" class="form-control" type="hidden" value="{{data.collectionlist.collectionname}}"><br/>

                Summary: <textarea name="CollectionDescription" class="form-control" rows="10" placeholder="Please describe the Ring" style="height:100px;" >{{data.collectionlist.collectiondescription}}
                  </textarea>
                  <br/>
                Version: <input name="CollectionVersion" class="form-control" type="text" value="{{data.collectionlist.version}}" >

            </div>
            <br/>
            <div class="box box-clear spa20">
                <div class="form-group">
                    <label for="inputPassword3" class="col-sm-2 control-label"></label>
                    
                        <button type="submit" class="btn btn-success">Save</button>
                        <a href="/{{ data.handle }}/_collections" type="submit" class="btn btn-default">Leave without saving anything</a>                        
                </div>
            </div>
            <div class="box box-title text-center">
                <a href="/{{ data.handle }}/_collections/{{ data.collection }}?method=delete" ><i class="fa fa-trash-o"></i><b>Delete this Collection</b> </a>
                <div class="text-gray">No Ring or item will be deleted.</div>
                        
            </div>
            <div class="spa20"></div>
    </div>
    <div class="col-sm-5">
            <div class="spa10"></div>

            {{ ui.rntitle('Rings included in this Collection','') }}

            <div class="box box-clear" style="padding:60px;">
                
                <p class="fs-0-9 text-gray">(One ring can be used in more than one collection)</p>
                
               
                <div class="form-group">
                  
                  {% set n = 0 %}
                  {% for ring in data.ringlist %}

                    {% set n = n+1 %}

                    {{ ui.icon_xsma('','#fce121') }}

                    <input name="ring_{{n}}" type='checkbox' value='{{data.handle}}_{{ring.ringname}}_{{ring.ringversionh}}' {% if data.handle+'_'+ring.ringname+'_'+ring.ringversionh in data.collectionrings %} checked {% endif %}/> 
                   


                    <a tabindex="0"  data-toggle="popover" data-trigger="focus" title="{{ data.handle }}/{{ring.ringname}}" data-content=" {{ring.ringdescription}} [ version: {{ring.ringversionh}} ]">{{ data.handle }}/{{ring.ringname}}</a>

                    <hr/>
                    
                    {% endfor %}

                    <div class="spa20">
                        <a role="menuitem" tabindex="-1" href="/{{data.handle}}/_collections/{{data.collectionlist.collectionname}}?rq=post&n=10" class="fc-i fs-1-4"><i class="fa fa-plus"></i> Create a new Ring</a>
                    </div>


                </div>
            </div>

              {% set numfields = request.args.get('n')|int %}

              <!-- SUBMIT -->


              <!-- SUBMIT END -->
              <!-- RING END -->

        </form> 
    </div>
</div>



{% endblock %}


{% block modals %}

  {% include 'avispa_rest/helpmodal.html' %}

{% endblock %}




