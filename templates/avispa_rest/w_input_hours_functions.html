<script>
$(document).ready(function(){


    var days ={
          "1":{"short":"mon_open", "long":"Monday Open"},
          "2":{"short":"mon_close", "long":"Monday Close"},
          "3":{"short":"tue_open", "long":"Tuesday Open"},
          "4":{"short":"tue_close", "long":"Tuesday Close"},
          "5":{"short":"wed_open", "long":"Wednesday Open"},
          "6":{"short":"wed_close", "long":"Wednesday Close"},
          "7":{"short":"thu_open", "long":"Thursday Open"},
          "8":{"short":"thu_close", "long":"Thursday Close"},
          "9":{"short":"fri_open", "long":"Friday Open"},
          "10":{"short":"fri_close", "long":"Friday Close"},
          "11":{"short":"sat_open", "long":"Saturday Open"},
          "12":{"short":"sat_close", "long":"Saturday Close"},
          "13":{"short":"sun_open", "long":"Sunday Open"},
          "14":{"short":"sun_close", "long":"Sunday Close"}
    };

    var times ={ 
          "1":{"rhour":"1:00 am", "mhour":"100"},
          "2":{"rhour":"2:00 am", "mhour":"200"},
          "3":{"rhour":"3:00 am", "mhour":"300"},
          "4":{"rhour":"4:00 am", "mhour":"400"},
          "5":{"rhour":"5:00 am", "mhour":"500"},
          "6":{"rhour":"6:00 am", "mhour":"600"},
          "7":{"rhour":"7:00 am", "mhour":"700"},
          "8":{"rhour":"8:00 am", "mhour":"800"},
          "9":{"rhour":"9:00 am", "mhour":"900"},
          "10":{"rhour":"10:00 am", "mhour":"1000"},
          "11":{"rhour":"11:00 am", "mhour":"1100"},
          "12":{"rhour":"12:00 am", "mhour":"1200"},
          "13":{"rhour":"13:00 am", "mhour":"1300"},
          "14":{"rhour":"14:00 am", "mhour":"1400"},
          "15":{"rhour":"15:00 am", "mhour":"1500"},
          "16":{"rhour":"16:00 am", "mhour":"1600"},
          "17":{"rhour":"17:00 am", "mhour":"1700"},
          "18":{"rhour":"18:00 am", "mhour":"1800"},
          "19":{"rhour":"19:00 am", "mhour":"1900"},
          "20":{"rhour":"20:00 am", "mhour":"2000"},
          "21":{"rhour":"21:00 am", "mhour":"2100"},
          "22":{"rhour":"22:00 am", "mhour":"2200"},
          "23":{"rhour":"23:00 am", "mhour":"2300"},
          "24":{"rhour":"24:00 am", "mhour":"2400"}

    }


    function hoursweek(lang_id,FieldId,lang_dict, times){
      var num = lang_id+"_"+FieldId,
        wt= '#wt_'+num, //div wrapper
        wb= '#wb_'+num,
        t= '#t_'+num,//div wrapper
        b= '#b_'+num, //menu button
        shortname= lang_dict[lang_id]["short"],
        longname= lang_dict[lang_id]["long"],
        uppername= shortname.toUpperCase(),
        lang_hide = false,
        default_lang= 'mon_open';


  {% if data.item[field.FieldId] %}

      fvalue = {{ data.item[field.FieldId] | safe }};
      console.log(fvalue)
      //if($.inArray(value, array)!=-1){
      if(fvalue[shortname]){
        //This language exists
        console.log('This language exists'+shortname)
        lang_hide= false;
        var inputvalue = fvalue[shortname];

      }else{
        //fvalue[shortname] = '';
        var inputvalue = '';  
      }

  {% else %}
      //If new
      var inputvalue = ''; 
      if(shortname == default_lang){
        lang_hide = false;
      }
       
  {% endif %}


      // $(wt).html("<div class='input-group' id='t_"+num+"'><input type='text' class='form-control flag-aware increment input-sm inp' placeholder='09:00 am' value='"+inputvalue+"'></div>");


$(wt).html("<span id='t_"+num+"' class='flag-aware increment inp p-5 m-10' style='width:300px;'><span class='fs-1'><select class='fc-b inp'><option>Closed</option><option>6:00 am</option><option>6:30 am</option><option>7:00 am</option><option>7:30 am</option><option>8:00 am</option><option>8:30 am</option><option>9:00 am</option><option>9:30 am</option><option>10:00 am</option><option>10:30 am</option><option>11:00 am</option><option>11:30 am</option><option>12:00 pm</option><option>12:30 pm</option><option>1:00 pm</option><option>1:30 pm</option><option>2:00 pm</option><option>2:30 pm</option><option>3:00 pm</option><option>3:30 pm</option><option>4:00 pm</option><option id='430' value='430'>4:30 pm</option><option>5:00 pm</option><option>5:30 pm</option><option>6:00 pm</option><option>6:30 pm</option><option>7:00 pm</option><option>7:30 pm</option><option>8:00 pm</option><option>8:30 pm</option><option>9:00 pm</option><option>9:30 pm</option><option>10:00 pm</option><option>10:30 pm</option><option>11:00 pm</option><option>11:30 pm</option><option>12:00 pm</option></select></span> <input type='hidden' id='inp_hidden'  value='1'></span>");
  

      $(wb).html("<a id='b_"+num+"'><span class='fc-b item'><i class='fa fa-toggle-on icon'></i> <span class='lan'></span></span></a>"); 
      $(t).find('.day').append(uppername);
      $(b).find('.lan').append(longname);
      if (lang_hide) {
        $(t).hide(); 
        $(b).find('.icon').switchClass( 'fa-toggle-on' ,'fa-toggle-off');
        $(b).find('.item').switchClass('fc-b' , 'fc-g');
      }
      //INPUT , OUTPUT
      var inp= $(t).find('#inp');
      inp.on("input", function() {
        $(h).find('#out').text(this.value);

      });

      $(b).click(function() {     
         $(t).toggle("slide", { direction: "up" }, 500);
         $(b).find('.icon').toggleClass('fa-toggle-off fa-toggle-on');
         $(b).find('.item').toggleClass('fc-b fc-g');
      });

      //INPUT , OUTPUT  
      inp= $(t).find('.inp');
      inp.on("change paste", function() {
        oldvalue = $("#text_multilang{{ field.FieldOrder }}").val();
        if(oldvalue==''){
          oldvalue = '{}';
        }
        var jsonold = JSON.parse(oldvalue);
        jsonold[shortname] = this.value;
        $("#text_multilang{{ field.FieldOrder }}").val(JSON.stringify(jsonold));
      });

     

    }

    for(l in days){
      console.log(l);
      hoursweek(l,'{{ field.FieldId}}',days, times);
    }

});
</script>